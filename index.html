<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Love ‚ù§Ô∏è</title>
    
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/sunset-theme.css">
    
    <link rel="icon" type="image/png" href="./images/logo.svg">
      
</head>
<body>
    <!-- Floating Hearts Animation -->
    <div class="floating-hearts" id="floating-hearts"></div>
    
    <!-- Modal x√°c th·ª±c -->
    <div id="auth-modal" class="auth-modal">
        <div class="auth-container">
            <div class="auth-header">
                <h2>üíï Ch√†o m·ª´ng ƒë·∫øn v·ªõi th·∫ø gi·ªõi c·ªßa ch√∫ng ta</h2>
                <p>Ch·ªâ c√≥ 2 ng∆∞·ªùi bi·∫øt ƒë∆∞·ª£c b√≠ m·∫≠t n√†y...</p>
            </div>
            
            <div class="auth-form">
                <div class="form-group">
                    <label for="auth-date">üìÖ Ng√†y ch√∫ng ta quen nhau:</label>
                    <input type="date" id="auth-date" class="auth-input" placeholder="Ch·ªçn ng√†y ƒë·∫∑c bi·ªát...">
                </div>
                
                <button id="auth-submit" class="auth-button">
                    <span class="button-text">üíñ X√°c nh·∫≠n</span>
                    <span class="button-loading" style="display: none;">‚è≥ ƒêang ki·ªÉm tra...</span>
                </button>
            </div>
            
            <div class="auth-hint">
                <p>üí° G·ª£i √Ω: Ng√†y n√†y r·∫•t ƒë·∫∑c bi·ªát v·ªõi c·∫£ hai ch√∫ng ta</p>
            </div>
            
            <div class="error-message"></div>
            <div class="success-message"></div>
        </div>
    </div>

    <!-- N·ªôi dung ch√≠nh (·∫©n ban ƒë·∫ßu) -->
    <div id="main-content" style="display: none;">
        <div class="main-selection-container">
            <h1 class="welcome-heading">Babi n√†o ƒë√¢y ?</h1>
            <div class="profile-selection">
                <a href="him-dashboard.html" class="profile-card your-profile">
                    <img src="images/him.jpg" alt="Your Profile Picture">
                    <span class="profile-name">beo.77.23</span>
                </a>

                <div class="animated-heart-wrapper">
                    <div class="heart"></div>
                </div>

                <a href="her-dashboard.html" class="profile-card her-profile">
                    <img src="images/her.jpg" alt="Her Profile Picture">
                    <span class="profile-name">_n.tkhzanh17_</span>
                </a>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore-compat.js"></script>

    <script src="js/firebase-init.js"></script>
    <script src="js/smooth-scroll.js"></script>
    <script src="js/floating-hearts.js"></script>
    
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Ng√†y quen nhau (thay ƒë·ªïi theo ng√†y th·ª±c t·∫ø)
        const SPECIAL_DATE = '2025-07-01'; // Thay ƒë·ªïi th√†nh ng√†y quen nhau th·ª±c t·∫ø
        
        const authModal = document.getElementById('auth-modal');
        const mainContent = document.getElementById('main-content');
        const authSubmit = document.getElementById('auth-submit');
        const authDate = document.getElementById('auth-date');
        const buttonText = document.querySelector('.button-text');
        const buttonLoading = document.querySelector('.button-loading');
        const errorMessage = document.querySelector('.error-message');
        const successMessage = document.querySelector('.success-message');
        
        // Ki·ªÉm tra n·∫øu ƒë√£ x√°c th·ª±c tr∆∞·ªõc ƒë√≥
        if (localStorage.getItem('authenticated') === 'true') {
            showMainContent();
            return;
        }
        
        // X·ª≠ l√Ω submit
        authSubmit.addEventListener('click', function() {
            const inputDate = authDate.value;
            
            if (!inputDate) {
                showError('Vui l√≤ng ch·ªçn ng√†y quen nhau!');
                return;
            }
            
            // Hi·ªÉn th·ªã loading
            showLoading();
            
            // Gi·∫£ l·∫≠p delay ƒë·ªÉ t·∫°o c·∫£m gi√°c ki·ªÉm tra
            setTimeout(() => {
                if (inputDate === SPECIAL_DATE) {
                    // X√°c th·ª±c th√†nh c√¥ng
                    localStorage.setItem('authenticated', 'true');
                    showSuccess('Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi th·∫ø gi·ªõi c·ªßa ch√∫ng ta! üíï');
                    
                    setTimeout(() => {
                        showMainContent();
                    }, 1500);
                } else {
                    // X√°c th·ª±c th·∫•t b·∫°i
                    showError('Hmm... C√≥ v·∫ª nh∆∞ b·∫°n ch∆∞a bi·∫øt b√≠ m·∫≠t c·ªßa ch√∫ng ta! ü§î');
                    hideLoading();
                }
            }, 1000);
        });
        
        // X·ª≠ l√Ω Enter key
        authDate.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') authSubmit.click();
        });
        
        function showLoading() {
            buttonText.style.display = 'none';
            buttonLoading.style.display = 'inline';
            authSubmit.disabled = true;
        }
        
        function hideLoading() {
            buttonText.style.display = 'inline';
            buttonLoading.style.display = 'none';
            authSubmit.disabled = false;
        }
        
        function showError(message) {
            hideLoading();
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            successMessage.style.display = 'none';
            
            // ·∫®n error sau 3 gi√¢y
            setTimeout(() => {
                errorMessage.style.display = 'none';
            }, 3000);
        }
        
        function showSuccess(message) {
            successMessage.textContent = message;
            successMessage.style.display = 'block';
            errorMessage.style.display = 'none';
        }
        
        function showMainContent() {
            authModal.style.display = 'none';
            mainContent.style.display = 'block';
            
            // Th√™m hi·ªáu ·ª©ng fade in
            mainContent.style.opacity = '0';
            mainContent.style.transition = 'opacity 0.5s ease';
            setTimeout(() => {
                mainContent.style.opacity = '1';
            }, 100);
        }
    });
    </script>
</body>
</html>